import{reactive as Se,watch as O,ref as R,defineComponent as ae,computed as M,resolveComponent as $,openBlock as c,createBlock as I,unref as C,withCtx as u,renderSlot as X,createVNode as b,createTextVNode as k,toDisplayString as B,createElementVNode as g,createElementBlock as p,Fragment as W,createCommentVNode as q,renderList as De,withDirectives as me,withKeys as se,withModifiers as Y,vModelText as ve,shallowRef as Re,onActivated as Be,nextTick as Ee,pushScopeId as Fe,popScopeId as Ue}from"vue";import{store as G,SchemaBase as de,isNullable as Ne,send as S,useContext as Te,useMenu as Ie,useColorMode as je,base64ToArrayBuffer as fe,arrayBufferToBase64 as Oe,icons as E}from"@koishijs/client";import{useRoute as pe,useRouter as We}from"vue-router";import{useElementSize as Ae,useEventListener as ie}from"@vueuse/core";import{m as Ke,e as le,l as A}from"./monaco-beb7c135.mjs";const o=Se({});O(()=>G.explorer,()=>{const n={...o};function s(w,v="/"){if(w)for(const d of w)d.filename=v+d.name,o[d.filename]=d,delete n[d.filename],s(d.children,d.filename+"/")}s(G.explorer);for(const w in n)delete o[w]},{immediate:true});const _e={mounted:n=>n.focus()},D=R(null),Pe=["onClick"],qe=["onUpdate:modelValue"],Ge={class:"left"},Je={class:"right"},Qe=ae({__name:"file-picker",props:{schema:{},modelValue:{},disabled:{},prefix:{},initial:{}},emits:["update:modelValue"],setup(n){const s=n,w=de.useModel(),v=M(()=>({filters:["file"],...s.schema.meta.extra})),d=M(()=>v.value.filters.includes("directory")),N=M(()=>v.value.filters.some(a=>a!=="directory")),H=M(()=>d.value?v.value.filters.length===1?"选择目录":"选择目录或文件":"选择文件"),x=R(false),l=R("/"),F=M(()=>{var y,i;const a=((y=o[l.value.slice(0,-1)])==null?void 0:y.children)||((i=G)==null?void 0:i.explorer)||[],{filters:r}=v.value;return a.filter(U=>{if(U.type==="directory")return true;if(U.type==="file"||U.type==="symlink")return r.includes("file")?true:r.some(Q=>{const h=U.name.lastIndexOf("."),T=h===-1?"":U.name.slice(h);return Q===T})})});function z(a){a.filename!==l.value&&(a.type==="directory"?l.value=l.value+a.name+"/":(w.value=l.value.slice(1)+a.name,x.value=false))}function Z(){var r,y;o[l.value]={type:"directory",name:"",filename:l.value,oldValue:"",newValue:""},(((r=o[l.value.slice(0,-1)])==null?void 0:r.children)||((y=G)==null?void 0:y.explorer)||[]).push(o[l.value])}function ee(){const a=o[l.value];if(!a)return;const r=l.value+a.name;r in o||!a.name?J():(o[r]=a,delete o[l.value],S("explorer/mkdir",r),a.filename=r)}function J(){var y,i;const a=o[l.value];if(!a)return;delete o[l.value];const r=((y=o[l.value.slice(0,-1)])==null?void 0:y.children)||((i=G)==null?void 0:i.explorer)||[];r.splice(r.indexOf(a),1)}const re=M(()=>{if(Ne(w.value))return;if(!w.value)return"根目录";const a=o["/"+w.value];return a?(a.type==="file"?"文件：":"目录：")+a.name:w.value});function te(){const a=l.value.slice(0,-1).lastIndexOf("/");l.value=l.value.slice(0,a+1)}function j(){x.value=false,d.value&&(w.value=l.value.slice(1,-1))}return(a,r)=>{const y=$("el-button"),i=$("k-icon"),U=$("el-scrollbar"),Q=$("el-dialog");return c(),I(C(de),null,{title:u(()=>[X(a.$slots,"title")]),desc:u(()=>[X(a.$slots,"desc")]),menu:u(()=>[X(a.$slots,"menu")]),prefix:u(()=>[X(a.$slots,"prefix")]),suffix:u(()=>[X(a.$slots,"suffix")]),control:u(()=>[b(y,{onClick:r[0]||(r[0]=h=>x.value=true)},{default:u(()=>[k(B(re.value??H.value),1)]),_:1}),b(Q,{class:"file-picker","destroy-on-close":"",modelValue:x.value,"onUpdate:modelValue":r[8]||(r[8]=h=>x.value=h)},{header:u(()=>[b(y,{class:"back-button",disabled:l.value==="/",onClick:r[1]||(r[1]=h=>te())},{default:u(()=>[b(i,{name:"chevron-left"})]),_:1},8,["disabled"]),k(" 从 "+B(l.value)+" "+B(H.value),1)]),footer:u(()=>[g("div",Ge,[v.value.allowCreate?(c(),p(W,{key:0},[N.value?(c(),I(y,{key:0,onClick:r[4]||(r[4]=h=>D.value=l.value+"/")},{default:u(()=>[k("上传文件")]),_:1})):q("v-if",true),d.value?(c(),I(y,{key:1,onClick:r[5]||(r[5]=h=>Z())},{default:u(()=>[k("创建文件夹")]),_:1})):q("v-if",true)],64)):q("v-if",true)]),g("div",Je,[b(y,{onClick:r[6]||(r[6]=h=>x.value=false)},{default:u(()=>[k("取消")]),_:1}),d.value?(c(),I(y,{key:0,type:"primary",onClick:r[7]||(r[7]=h=>j())},{default:u(()=>[k("选定当前目录")]),_:1})):q("v-if",true)])]),default:u(()=>[b(U,null,{default:u(()=>[(c(true),p(W,null,De(F.value,h=>(c(),p("div",{class:"entry",key:h.name,onClick:T=>z(h)},[b(i,{class:"entry-icon",name:h.type},null,8,["name"]),h.filename===l.value?me((c(),p("input",{key:0,"onUpdate:modelValue":T=>h.name=T,onKeypress:r[2]||(r[2]=se(Y(T=>ee(),["prevent"]),["enter"])),onKeydown:r[3]||(r[3]=se(Y(T=>J(),["prevent"]),["escape"]))},null,40,qe)),[[C(_e)],[ve,h.name]]):(c(),p(W,{key:1},[k(B(h.name),1)],64))],8,Pe))),128))]),_:1})]),_:1},8,["modelValue"])]),_:3})}}});function Xe(){return new Worker("/editor.worker-94ffd778.js")}window.monaco=Ke;window.MonacoEnvironment={getWorker(n,s){return new Xe}};const P=le.createModel(""),{cssDefaults:Ye,lessDefaults:Ze,scssDefaults:et}=A.css;for(const n of[Ye,Ze,et])n.setModeConfiguration({completionItems:false,hovers:false,documentSymbols:false,definitions:false,references:false,documentHighlights:false,rename:false,colors:false,foldingRanges:false,diagnostics:false,selectionRanges:false,documentFormattingEdits:false,documentRangeFormattingEdits:false});const{jsonDefaults:tt}=A.json;for(const n of[tt])n.setModeConfiguration({documentFormattingEdits:false,documentRangeFormattingEdits:false,completionItems:false,hovers:false,documentSymbols:false,tokens:true,colors:false,foldingRanges:false,diagnostics:false,selectionRanges:false});const{javascriptDefaults:nt,typescriptDefaults:ot}=A.typescript;for(const n of[nt,ot])n.setModeConfiguration({completionItems:false,hovers:false,documentSymbols:false,definitions:false,references:false,documentHighlights:false,rename:false,diagnostics:false,documentRangeFormattingEdits:false,signatureHelp:false,onTypeFormattingEdits:false,codeActions:false,inlayHints:false});const{htmlDefaults:lt,handlebarDefaults:st,razorDefaults:at}=A.html;for(const n of[lt,st,at])n.setModeConfiguration({completionItems:false,hovers:false,documentSymbols:false,links:false,documentHighlights:false,rename:false,colors:false,foldingRanges:false,diagnostics:false,selectionRanges:false,documentFormattingEdits:false,documentRangeFormattingEdits:false});const ce=Re(A.getLanguages()[0]);P.onDidChangeLanguage(n=>{ce.value=A.getLanguages().find(s=>s.id===n.newLanguage)});const rt=n=>(Fe("data-v-cfd59fee"),n=n(),Ue(),n),it={class:"search"},ct={class:"item"},ut=["title"],dt=["onUpdate:modelValue","onKeypress"],ft={class:"right"},mt={key:1},vt=rt(()=>g("div",{class:"el-loading-spinner"},[g("svg",{class:"circular",viewBox:"25 25 50 50"},[g("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),g("p",{class:"el-loading-text"},"正在加载……")],-1)),pt=[vt],_t=["src"],gt=["src"],ht={key:3},wt={class:"dialog-footer"},Ct=ae({__name:"index",setup(n){const s=Te(),w=pe(),v=We(),d=R(""),N=R(null),H=R(null),x=R(null),l=R(null),F=R([]),z=R(null),Z=Ie("explorer.tree");s.action("explorer.save",{shortcut:"ctrl+s",disabled:()=>{var e,t,m,f;return((e=o[i.value])==null?void 0:e.newValue)===((t=o[i.value])==null?void 0:t.oldValue)||!["files"].includes((f=(m=v.currentRoute.value)==null?void 0:m.meta)==null?void 0:f.activity.id)},action:async()=>{const e=o[i.value].newValue;await S("explorer/write",i.value,e),o[i.value].oldValue=e}}),s.action("explorer.refresh",{shortcut:"ctrl+r",disabled:()=>{var e,t;return!["files"].includes((t=(e=v.currentRoute.value)==null?void 0:e.meta)==null?void 0:t.activity.id)},action:()=>S("explorer/refresh")}),s.action("explorer.tree.create-file",{disabled:({explorer:e})=>e.tree.type!=="directory",action:({explorer:e})=>h(e.tree,"file")}),s.action("explorer.tree.create-directory",{disabled:({explorer:e})=>e.tree.type!=="directory",action:({explorer:e})=>h(e.tree,"directory")}),s.action("explorer.tree.upload",{disabled:({explorer:e})=>e.tree.type!=="directory",action:({explorer:e})=>D.value=e.tree.filename+"/"}),s.action("explorer.tree.download",{disabled:({explorer:e})=>e.tree.type==="directory",action:({explorer:e})=>be(e.tree.filename)}),s.action("explorer.tree.remove",{disabled:({explorer:e})=>!e.tree.filename,action:({explorer:e})=>$e(e.tree)}),s.action("explorer.tree.rename",{disabled:({explorer:e})=>!e.tree.filename,action:({explorer:e})=>{ne(),l.value=e.tree.filename}});const ee=M({get:()=>!!z.value,set:e=>z.value=null});function*J(e){for(const t of e)t.expanded&&(yield t.filename),t.children&&(yield*J(t.children))}const re=M(()=>[...J(F.value)]);function te(e,t){return t==null?void 0:t.map(m=>{const f=e.find(V=>V.type===m.type&&V.name===m.name);return f?{...f,...m,children:te(f.children,m.children)}:m})}O(()=>G.explorer,e=>{F.value=te(F.value,e)||[]},{immediate:true});let j=null;O(d,e=>{N.value.filter(e)});const a=je();O(x,()=>{if(!x.value)return j=null;j=le.create(x.value,{model:P,theme:"vs-"+a.value,tabSize:2})});const{width:r,height:y}=Ae(x);O([r,y],()=>{j==null||j.layout()}),O(a,()=>{le.setTheme("vs-"+a.value)});const i=M({get(){const e=w.path.slice(6);return e in o?e:""},set(e){e in o||(e=""),v.replace("/files"+e)}});function U(e){const t=[];return e.name===i.value&&t.push("is-active"),t.join(" ")}function Q(e,t){return t.name.toLowerCase().includes(d.value.toLowerCase())}function h(e,t){ne(),l.value=e.filename+"/",o[l.value]={type:t,name:"",filename:l.value,oldValue:"",newValue:""},e.expanded=true,e.children.push(o[l.value])}function T(e){var V;const t=e.filename.split(/\//g),m=t.pop();t.push(e.name);const f=t.join("/");if(f in o||!e.name)if(m)e.name=m;else{delete o[e.filename];const oe=((V=o[t.slice(0,-1).join("/")])==null?void 0:V.children)||F.value;oe.splice(oe.indexOf(e),1)}else e.filename!==f&&(o[f]=e,delete o[e.filename],m?(S("explorer/rename",e.filename,f),i.value=f):e.type==="file"?(S("explorer/write",f,""),i.value=f):S("explorer/mkdir",f),e.filename=f);l.value=null}function ne(){var f;if(!l.value)return;const e=o[l.value],t=e.filename.split(/\//g),m=t.pop();if(t.push(e.name),m)e.name=m;else{delete o[e.filename];const V=((f=o[t.slice(0,-1).join("/")])==null?void 0:f.children)||F.value;V.splice(V.indexOf(e),1)}l.value=null}function ge(e){return false}function he(e,t,m){return false}function we(e){var f;const t=e.lastIndexOf("."),m=t===-1?"":e.slice(t);for(const V of A.getLanguages())if((f=V.extensions)!=null&&f.includes(m))return V.id;return"plaintext"}O(()=>o[i.value],async e=>{if(!(!e||e.type==="directory")){if(typeof e.oldValue!="string"){e.loading=S("explorer/read",e.filename);const{base64:t,mime:m}=await e.loading;e.loading=null,e.mime=m,m?e.oldValue=e.newValue=`data:${m};base64,${t}`:e.oldValue=e.newValue=new TextDecoder().decode(fe(t))}P.setValue(e.newValue),le.setModelLanguage(P,we(e.filename))}},{immediate:true}),P.onDidChangeContent(e=>{const t=o[i.value];t&&(t.newValue=P.getValue())});async function Ce(e){e.type!=="directory"&&(i.value=e.filename)}const xe=M(()=>({name:"",filename:"",type:"directory",children:F.value}));function ye(e){e.expanded=true}function Ve(e){e.expanded=false}function ke(e,t,m,f){}function $e(e){ne(),z.value=e.filename+(e.type==="directory"?"/":"")}Be(async()=>{const e=H.value.$el;await Ee();const t=e.querySelector(".el-tree-node.is-active");t&&H.value.setScrollTop(t.offsetTop-(e.offsetHeight-t.offsetHeight)/2)});async function be(e){const{base64:t}=await S("explorer/read",e),m=new Blob([fe(t)]),f=URL.createObjectURL(m),V=document.createElement("a");V.href=f,V.download=e,V.click(),URL.revokeObjectURL(f)}return(e,t)=>{const m=$("k-icon"),f=$("el-input"),V=$("el-tree"),oe=$("el-scrollbar"),He=$("k-empty"),Me=$("k-image-viewer"),Le=$("k-layout"),ue=$("el-button"),ze=$("el-dialog");return c(),p(W,null,[b(Le,{menu:"explorer"},{header:u(()=>[k(" 资源管理器"+B(i.value?" - "+i.value:""),1)]),left:u(()=>[b(oe,{ref_key:"root",ref:H,onContextmenu:t[2]||(t[2]=Y(_=>C(Z)(_,xe.value),["stop"]))},{default:u(()=>[g("div",it,[b(f,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=_=>d.value=_)},{suffix:u(()=>[b(m,{name:"search"})]),_:1},8,["modelValue"])]),b(V,{ref_key:"tree",ref:N,"node-key":"filename",draggable:true,data:F.value,props:{label:"name",class:U},"filter-node-method":Q,"allow-drag":ge,"allow-drop":he,"default-expanded-keys":re.value,onNodeClick:Ce,onNodeContextmenu:C(Z),onNodeExpand:ye,onNodeCollapse:Ve,onNodeDrop:ke},{default:u(({node:_})=>[g("div",ct,[g("div",{class:"label",title:_.data.name},[_.data.filename===l.value?me((c(),p("input",{key:0,"onUpdate:modelValue":K=>_.data.name=K,onKeypress:se(Y(K=>T(_.data),["prevent"]),["enter"]),onKeydown:t[1]||(t[1]=se(Y(K=>ne(),["prevent"]),["escape"]))},null,40,dt)),[[C(_e)],[ve,_.data.name]]):(c(),p(W,{key:1},[k(B(_.data.name),1)],64))],8,ut),g("div",ft,[_.data.oldValue!==_.data.newValue?(c(),p(W,{key:0},[k("M")],64)):q("v-if",true)])])]),_:1},8,["data","props","default-expanded-keys","onNodeContextmenu"])]),_:1},512)]),default:u(()=>{var _,K;return[!C(o)[i.value]||C(o)[i.value].type==="directory"?(c(),I(He,{key:0},{default:u(()=>[k("在左侧栏选择要查看的文件")]),_:1})):(_=C(o)[i.value])!=null&&_.loading?(c(),p("div",mt,pt)):(K=C(o)[i.value])!=null&&K.mime?(c(),p(W,{key:2},[C(o)[i.value].mime.startsWith("image/")?(c(),I(Me,{key:0,src:C(o)[i.value].newValue},null,8,["src"])):C(o)[i.value].mime.startsWith("audio/")?(c(),p("audio",{key:1,src:C(o)[i.value].newValue,controls:""},null,8,_t)):C(o)[i.value].mime.startsWith("video/")?(c(),p("video",{key:2,src:C(o)[i.value].newValue,controls:""},null,8,gt)):(c(),p("div",ht,"不支持的文件格式："+B(C(o)[i.value].mime),1))],64)):(c(),p("div",{key:3,ref_key:"editor",ref:x,class:"editor"},null,512))]}),_:1}),b(ze,{modelValue:ee.value,"onUpdate:modelValue":t[5]||(t[5]=_=>ee.value=_),"destroy-on-close":""},{footer:u(()=>[g("span",wt,[b(ue,{onClick:t[3]||(t[3]=_=>z.value=null)},{default:u(()=>[k("取消")]),_:1}),b(ue,{type:"primary",onClick:t[4]||(t[4]=_=>(C(S)("explorer/remove",z.value),z.value=null))},{default:u(()=>[k(" 确认 ")]),_:1})])]),default:u(()=>{var _;return[k(" 你真的要删除文件"+B((_=z.value)!=null&&_.endsWith("/")?"夹":"")+" "+B(z.value)+" 吗？ ",1)]}),_:1},8,["modelValue"])],64)}}});const L=(n,s)=>{const w=n.__vccOpts||n;for(const[v,d]of s)w[v]=d;return w},xt=L(Ct,[["__scopeId","data-v-cfd59fee"]]),yt=ae({__name:"status",setup(n){const s=pe();return(w,v)=>{const d=$("k-status");return C(s).path.startsWith("/files")?(c(),I(d,{key:0},{default:u(()=>[k(B(C(ce).aliases[0]??C(ce).id),1)]),_:1})):q("v-if",true)}}}),Vt={class:"dialog-footer"},kt=ae({__name:"upload",setup(n){const s=M({get:()=>!!D.value,set:v=>D.value=null});function w(v,d){const N=D.value;for(const H of d.items){if(H.kind!=="file")continue;v.preventDefault();const x=H.getAsFile(),l=new FileReader;l.addEventListener("load",function(){S("explorer/write",N+x.name,Oe(l.result),true)},false),l.readAsArrayBuffer(x)}D.value=null}return ie("drop",v=>{D.value&&w(v,v.dataTransfer)}),ie("paste",v=>{D.value&&w(v,v.clipboardData)}),ie("dragover",v=>{D.value&&v.preventDefault()}),(v,d)=>{const N=$("el-button"),H=$("el-dialog");return c(),I(H,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=x=>s.value=x),"destroy-on-close":""},{footer:u(()=>[g("span",Vt,[b(N,{onClick:d[0]||(d[0]=x=>D.value=null)},{default:u(()=>[k("取消")]),_:1})])]),default:u(()=>[k(" 请将文件拖动到窗口内以上传。 ")]),_:1},8,["modelValue"])}}}),$t={},bt={class:"k-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},Ht=g("path",{fill:"currentColor",d:"M336 480H96c-35.35 0-64-28.65-64-64V112C32 103.2 24.84 96 16 96S0 103.2 0 112V416c0 53.02 42.98 96 96 96h240c8.836 0 16-7.164 16-16S344.8 480 336 480zM429.3 113.3l-94.51-94.51C322.7 6.742 306.5 0 289.5 0H160C124.7 0 96 28.65 96 64l.0098 288c0 35.35 28.65 64 64 64h224C419.4 416 448 387.3 448 352V158.5C448 141.5 441.3 125.3 429.3 113.3zM320 49.25L398.8 128H336C327.2 128 320 120.8 320 112V49.25zM416 352c0 17.64-14.36 32-32 32H160c-17.64 0-32-14.36-32-32V64c0-17.64 14.36-32 32-32h128v80C288 138.5 309.5 160 336 160H416V352z"},null,-1),Mt=[Ht];function Lt(n,s){return c(),p("svg",bt,Mt)}const zt=L($t,[["render",Lt]]),St={},Dt={class:"k-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Rt=g("path",{fill:"currentColor",d:"M447.1 96h-172.1L226.7 50.75C214.7 38.74 198.5 32 181.5 32H63.1c-35.35 0-64 28.66-64 64v320c0 35.34 28.65 64 64 64h384c35.35 0 64-28.66 64-64V160C511.1 124.7 483.3 96 447.1 96zM463.1 416c0 8.824-7.178 16-16 16h-384c-8.822 0-16-7.176-16-16V96c0-8.824 7.178-16 16-16h117.5c4.273 0 8.293 1.664 11.31 4.688L255.1 144h192c8.822 0 16 7.176 16 16V416z"},null,-1),Bt=[Rt];function Et(n,s){return c(),p("svg",Dt,Bt)}const Ft=L(St,[["render",Et]]),Ut={},Nt={class:"k-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Tt=g("path",{fill:"currentColor",d:"M448 96h-172.1L226.7 50.75C214.7 38.74 198.5 32 181.5 32H64C28.66 32 0 60.66 0 96v320c0 35.34 28.66 64 64 64h384c35.34 0 64-28.66 64-64V160C512 124.7 483.3 96 448 96zM464 416c0 8.824-7.18 16-16 16H64c-8.82 0-16-7.176-16-16V96c0-8.824 7.18-16 16-16h117.5c4.273 0 8.289 1.664 11.31 4.688L256 144h192c8.82 0 16 7.176 16 16V416zM336 264h-56V207.1C279.1 194.7 269.3 184 256 184S232 194.7 232 207.1V264H175.1C162.7 264 152 274.7 152 288c0 13.26 10.73 23.1 23.1 23.1h56v56C232 381.3 242.7 392 256 392c13.26 0 23.1-10.74 23.1-23.1V311.1h56C349.3 311.1 360 301.3 360 288S349.3 264 336 264z"},null,-1),It=[Tt];function jt(n,s){return c(),p("svg",Nt,It)}const Ot=L(Ut,[["render",jt]]),Wt={},At={class:"k-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Kt=g("path",{fill:"currentColor",d:"M448 304h-53.5l-48 48H448c8.822 0 16 7.178 16 16V448c0 8.822-7.178 16-16 16H64c-8.822 0-16-7.178-16-16v-80C48 359.2 55.18 352 64 352h101.5l-48-48H64c-35.35 0-64 28.65-64 64V448c0 35.35 28.65 64 64 64h384c35.35 0 64-28.65 64-64v-80C512 332.7 483.3 304 448 304zM432 408c0-13.26-10.75-24-24-24S384 394.7 384 408c0 13.25 10.75 24 24 24S432 421.3 432 408zM239 368.1C243.7 373.7 249.8 376 256 376s12.28-2.344 16.97-7.031l136-136c9.375-9.375 9.375-24.56 0-33.94s-24.56-9.375-33.94 0L280 294.1V24C280 10.75 269.3 0 256 0S232 10.75 232 24v270.1L136.1 199c-9.375-9.375-24.56-9.375-33.94 0s-9.375 24.56 0 33.94L239 368.1z"},null,-1),Pt=[Kt];function qt(n,s){return c(),p("svg",At,Pt)}const Gt=L(Wt,[["render",qt]]),Jt={},Qt={class:"k-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},Xt=g("path",{fill:"currentColor",d:"M0 64C0 28.65 28.65 0 64 0H229.5C246.5 0 262.7 6.743 274.7 18.75L365.3 109.3C377.3 121.3 384 137.5 384 154.5V448C384 483.3 355.3 512 320 512H64C28.65 512 0 483.3 0 448V64zM336 448V160H256C238.3 160 224 145.7 224 128V48H64C55.16 48 48 55.16 48 64V448C48 456.8 55.16 464 64 464H320C328.8 464 336 456.8 336 448z"},null,-1),Yt=[Xt];function Zt(n,s){return c(),p("svg",Qt,Yt)}const en=L(Jt,[["render",Zt]]),tn={},nn={class:"k-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},on=g("path",{fill:"currentColor",d:"M365.3 93.38l-74.63-74.64C278.6 6.742 262.3 0 245.4 0H64C28.66 0 0 28.65 0 64l.0065 384c0 35.34 28.65 64 64 64H320c35.2 0 64-28.8 64-64V138.6C384 121.7 377.3 105.4 365.3 93.38zM336 448c0 8.836-7.164 16-16 16H64.02c-8.836 0-16-7.164-16-16L48 64.13c0-8.836 7.164-16 16-16h160L224 128c0 17.67 14.33 32 32 32H336V448zM216 223.1C216 210.7 205.3 200 192 200S168 210.7 168 223.1V280H112c-13.26 0-24 10.74-24 23.1c0 13.26 10.73 23.1 24 23.1h56v56C168 397.3 178.7 408 192 408c13.26 0 24-10.74 24-23.1V327.1h56c13.26 0 24-10.74 24-23.1s-10.74-23.1-24-23.1h-56V223.1z"},null,-1),ln=[on];function sn(n,s){return c(),p("svg",nn,ln)}const an=L(tn,[["render",sn]]),rn={},cn={class:"k-icon refresh",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},un=g("path",{fill:"currentColor",d:"M496 40v160C496 213.3 485.3 224 472 224h-160C298.8 224 288 213.3 288 200s10.75-24 24-24h100.5C382.8 118.3 322.5 80 256 80C158.1 80 80 158.1 80 256s78.97 176 176 176c41.09 0 81.09-14.47 112.6-40.75c10.16-8.5 25.31-7.156 33.81 3.062c8.5 10.19 7.125 25.31-3.062 33.81c-40.16 33.44-91.17 51.77-143.5 51.77C132.4 479.9 32 379.5 32 256s100.4-223.9 223.9-223.9c79.85 0 152.4 43.46 192.1 109.1V40c0-13.25 10.75-24 24-24S496 26.75 496 40z"},null,-1),dn=[un];function fn(n,s){return c(),p("svg",cn,dn)}const mn=L(rn,[["render",fn]]),vn={},pn={class:"k-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},_n=g("path",{fill:"currentColor",d:"M224 256c-35.2 0-64 28.8-64 64c0 35.2 28.8 64 64 64c35.2 0 64-28.8 64-64C288 284.8 259.2 256 224 256zM433.1 129.1l-83.9-83.9C341.1 37.06 328.8 32 316.1 32H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h320c35.35 0 64-28.65 64-64V163.9C448 151.2 442.9 138.9 433.1 129.1zM128 80h144V160H128V80zM400 416c0 8.836-7.164 16-16 16H64c-8.836 0-16-7.164-16-16V96c0-8.838 7.164-16 16-16h16v104c0 13.25 10.75 24 24 24h192C309.3 208 320 197.3 320 184V83.88l78.25 78.25C399.4 163.2 400 164.8 400 166.3V416z"},null,-1),gn=[_n];function hn(n,s){return c(),p("svg",pn,gn)}const wn=L(vn,[["render",hn]]),Cn={},xn={class:"k-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},yn=g("path",{fill:"currentColor",d:"M280 80C266.7 80 256 69.25 256 56C256 42.75 266.7 32 280 32H424C437.3 32 448 42.75 448 56V200C448 213.3 437.3 224 424 224C410.7 224 400 213.3 400 200V113.9L200.1 312.1C191.6 322.3 176.4 322.3 167 312.1C157.7 303.6 157.7 288.4 167 279L366.1 80H280zM0 120C0 89.07 25.07 64 56 64H168C181.3 64 192 74.75 192 88C192 101.3 181.3 112 168 112H56C51.58 112 48 115.6 48 120V424C48 428.4 51.58 432 56 432H360C364.4 432 368 428.4 368 424V312C368 298.7 378.7 288 392 288C405.3 288 416 298.7 416 312V424C416 454.9 390.9 480 360 480H56C25.07 480 0 454.9 0 424V120z"},null,-1),Vn=[yn];function kn(n,s){return c(),p("svg",xn,Vn)}const $n=L(Cn,[["render",kn]]),bn={},Hn={class:"k-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Mn=g("path",{fill:"currentColor",d:"M448 304h-128V352h128c8.822 0 16 7.178 16 16V448c0 8.822-7.178 16-16 16H64c-8.822 0-16-7.178-16-16v-80C48 359.2 55.18 352 64 352h128V304H64c-35.35 0-64 28.65-64 64V448c0 35.35 28.65 64 64 64h384c35.35 0 64-28.65 64-64v-80C512 332.7 483.3 304 448 304zM136.1 176.1L232 81.94V352c0 13.25 10.75 24 24 24s24-10.75 24-24V81.94l95.03 95.03C379.7 181.7 385.8 184 392 184s12.28-2.344 16.97-7.031c9.375-9.375 9.375-24.56 0-33.94l-136-136c-9.375-9.375-24.56-9.375-33.94 0l-136 136c-9.375 9.375-9.375 24.56 0 33.94S127.6 186.3 136.1 176.1zM432 408c0-13.26-10.75-24-24-24S384 394.7 384 408c0 13.25 10.75 24 24 24S432 421.3 432 408z"},null,-1),Ln=[Mn];function zn(n,s){return c(),p("svg",Hn,Ln)}const Sn=L(bn,[["render",zn]]);E.register("activity:explorer",zt);E.register("directory",Ft);E.register("directory-create",Ot);E.register("download",Gt);E.register("file",en);E.register("file-create",an);E.register("refresh",mn);E.register("save",wn);E.register("symlink",$n);E.register("upload",Sn);const Un=n=>{n.schema({type:"string",role:"path",component:Qe,validate:s=>typeof s=="string"}),n.slot({type:"global",component:kt}),n.page({id:"files",path:"/files/:name*",name:"资源管理器",icon:"activity:explorer",order:600,fields:["explorer"],component:xt}),n.slot({type:"status-right",component:yt}),n.menu("explorer",[{id:"explorer.save",icon:"save",label:"保存"},{id:"explorer.refresh",icon:"refresh",label:"刷新"}]),n.menu("explorer.tree",[{id:".create-file",icon:"file-create",label:"新建文件"},{id:".create-directory",icon:"directory-create",label:"新建文件夹"},{id:".upload",icon:"upload",label:"上传文件"},{id:".download",icon:"download",label:"下载文件"},{id:"@separator"},{id:".rename",icon:"edit",label:"重命名"},{id:".remove",icon:"delete",type:"danger",label:"删除"}])};export{Un as default};
